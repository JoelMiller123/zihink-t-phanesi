{% extends 'base.html' %}
{% block title %}Kayıt Ol{% endblock %}
{% block content %}
<style>
  body { background-color: black; overflow-x: hidden; margin: 0; }
  canvas#bgCanvas { position: fixed; top:0; left:0; width:100%; height:100%; z-index:-1; }

  .register-card {
    background-color: rgba(0,0,0,0.85);
    padding: 30px;
    border-radius: 12px;
    max-width: 400px;
    margin: 100px auto;
    color: white;
  }
  .register-card input { background-color: #111; color: white; border: none; }
  .register-card a { color: white; text-decoration: underline; }
  .btn-custom:hover { background-color: white !important; color: black !important; transform: scale(1.05); }
</style>

<canvas id="bgCanvas"></canvas>

<script>
const canvas = document.getElementById("bgCanvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()";
const fontSize = 18;
const columns = canvas.width / fontSize;
const drops = Array.from({length: columns}).map(() => 1);

function draw() {
  ctx.fillStyle = "rgba(0,0,0,0.05)";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle = "#ffffff";
  ctx.font = fontSize+"px monospace";
  for(let i=0;i<drops.length;i++){
    const text = letters.charAt(Math.floor(Math.random()*letters.length));
    ctx.fillText(text,i*fontSize,drops[i]*fontSize);
    if(drops[i]*fontSize>canvas.height && Math.random()>0.975) drops[i]=0;
    drops[i]++;
  }
}
setInterval(draw,50);
window.addEventListener("resize",()=>{canvas.width=window.innerWidth; canvas.height=window.innerHeight;});
</script>

<div class="register-card">
    <h2 class="text-center mb-4">Kayıt Ol</h2>
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="alert alert-warning">
          <ul class="mb-0">
            {% for m in messages %}
              <li>{{ m }}</li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}
    {% endwith %}
    <form method="post">
        <div class="mb-3">
            <label class="form-label">Kullanıcı Adı</label>
            <input type="text" name="username" class="form-control" required>
        </div>
        <div class="mb-3">
            <label class="form-label">Şifre</label>
            <input type="password" name="password" class="form-control" required>
        </div>
        <button type="submit" class="btn btn-success btn-custom w-100">Kayıt Ol</button>
    </form>
    <p class="mt-3 text-center">Zaten hesabın var mı? <a href="/login">Giriş yap</a></p>
</div>
{% endblock %}
